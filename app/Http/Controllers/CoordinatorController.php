<?php

namespace App\Http\Controllers;

use App\Models\EduroleStudy;
use Illuminate\Http\Request;

class CoordinatorController extends Controller
{
    public function uploadCa(Request $request)
    {

        $courseId = $request->courseId;
        $statusId = $request->statusId;

        $results = EduroleStudy::join('basic-information', 'basic-information.ID', '=', 'study.ProgrammesAvailable')
            ->join('study-program-link', 'study-program-link.StudyID', '=', 'study.ID')
            ->join('programmes', 'programmes.ID', '=', 'study-program-link.ProgramID')
            ->join('program-course-link', 'program-course-link.ProgramID', '=', 'programmes.ID')
            ->join('courses', 'courses.ID', '=', 'program-course-link.CourseID')
            ->select('courses.ID','basic-information.Firstname', 'basic-information.Surname', 'basic-information.PrivateEmail', 'study.ProgrammesAvailable', 'study.Name', 'courses.Name as CourseName','courses.CourseDescription')
            ->where('courses.ID', $courseId)
            ->first();
        return view('coordinator.uploadCa', compact('results', 'statusId'));
    }
}
